/*
 * Script from NETTUTS.com [by James Padolsey]
 * @requires jQuery($), jQuery UI & sortable/draggable UI modules
 */var iNettuts={jQuery:$,settings:{columns:".col-md-6",widgetSelector:".panel",handleSelector:".panel-heading",contentSelector:".panel-body",widgetDefault:{movable:!0,removable:!1,collapsible:!1,editable:!1,colorClasses:["color-yellow","color-red","color-blue","color-white","color-orange","color-green"]},widgetIndividual:{intro:{movable:!1,removable:!1,collapsible:!1,editable:!1}}},init:function(){this.addWidgetControls();this.makeSortable()},getWidgetSettings:function(e){var t=this.jQuery,n=this.settings;return e&&n.widgetIndividual[e]?t.extend({},n.widgetDefault,n.widgetIndividual[e]):n.widgetDefault},addWidgetControls:function(){var e=this,t=this.jQuery,n=this.settings;t(n.widgetSelector,t(n.columns)).each(function(){var r=e.getWidgetSettings(this.id);r.removable&&t('<a href="#" class="remove">CLOSE</a>').mousedown(function(e){e.stopPropagation()}).click(function(){confirm("This widget will be removed, ok?")&&t(this).parents(n.widgetSelector).animate({opacity:0},function(){t(this).wrap("<div/>").parent().slideUp(function(){t(this).remove()})});return!1}).appendTo(t(n.handleSelector,this));if(r.editable){t('<a href="#" class="edit">EDIT</a>').mousedown(function(e){e.stopPropagation()}).toggle(function(){t(this).css({backgroundPosition:"-66px 0",width:"55px"}).parents(n.widgetSelector).find(".edit-box").show().find("input").focus();return!1},function(){t(this).css({backgroundPosition:"",width:""}).parents(n.widgetSelector).find(".edit-box").hide();return!1}).appendTo(t(n.handleSelector,this));t('<div class="edit-box" style="display:none;"/>').append('<ul><li class="item"><label>Change the title?</label><input value="'+t("h3",this).text()+'"/></li>').append(function(){var e='<li class="item"><label>Available colors:</label><ul class="colors">';t(r.colorClasses).each(function(){e+='<li class="'+this+'"/>'});return e+"</ul>"}()).append("</ul>").insertAfter(t(n.handleSelector,this))}r.collapsible&&t('<a href="#" class="collapse">COLLAPSE</a>').mousedown(function(e){e.stopPropagation()}).toggle(function(){t(this).css({backgroundPosition:"-38px 0"}).parents(n.widgetSelector).find(n.contentSelector).hide();return!1},function(){t(this).css({backgroundPosition:""}).parents(n.widgetSelector).find(n.contentSelector).show();return!1}).prependTo(t(n.handleSelector,this))});t(".edit-box").each(function(){t("input",this).keyup(function(){t(this).parents(n.widgetSelector).find("h3").text(t(this).val().length>20?t(this).val().substr(0,20)+"...":t(this).val())});t("ul.colors li",this).click(function(){var e=/\bcolor-[\w]{1,}\b/,r=t(this).parents(n.widgetSelector).attr("class").match(e);r&&t(this).parents(n.widgetSelector).removeClass(r[0]).addClass(t(this).attr("class").match(e)[0]);return!1})})},attachStylesheet:function(e){var t=this.jQuery;return t('<link href="'+e+'" rel="stylesheet" type="text/css" />').appendTo("head")},makeSortable:function(){var e=this,t=this.jQuery,n=this.settings,r=function(){var r="";t(n.widgetSelector,t(n.columns)).each(function(t){if(!e.getWidgetSettings(this.id).movable){this.id||(this.id="widget-no-id-"+t);r+="#"+this.id+","}});r=r.replace(/,$/,"");return t("> li:not("+r+")",n.columns)}();r.find(n.handleSelector).css({cursor:"move"}).mousedown(function(e){r.css({width:""});t(this).parent().css({width:t(this).parent().width()+"px"})}).mouseup(function(){t(this).parent().hasClass("dragging")?t(n.columns).sortable("disable"):t(this).parent().css({width:""})});t(n.columns).sortable({items:r,connectWith:t(n.columns),handle:n.handleSelector,placeholder:"widget-placeholder",forcePlaceholderSize:!0,revert:300,delay:100,opacity:.8,containment:"document",start:function(e,n){t(n.helper).addClass("dragging")},stop:function(e,r){t(r.item).css({width:""}).removeClass("dragging");t(n.columns).sortable("enable")}})}};iNettuts.init();